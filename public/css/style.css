/* Modern Variables */
:root {
    /* Main Colors */
    --primary-color: #bb86fc;
    --primary-hover: #d0aaff;
    --background-dark: #1a1a1a; /* Base body background (if needed) */
    --background-darker: #121212;
    --surface-dark: #2c2c2c; /* Used for navbar, main container, footer */
    --text-primary: #e0e0e0;
    --text-secondary: #aaa;

    /* Accent Colors */
    --success-color: #81c784;
    --error-color: #e57373;
    --warning-color: #ffa726; /* Added warning color */
    --info-color: #0dcaf0;
    --danger-color: #dc3545;
    --secondary-color-bg: var(--surface-dark);
    --secondary-color-border: rgba(255, 255, 255, 0.2);
    --secondary-hover-bg: rgba(255, 255, 255, 0.1);
    --secondary-hover-border: rgba(255, 255, 255, 0.3);
    --warning-hover: #fb8c00;
    --success-hover: #66bb6a;
    --info-hover: #0b9ed7;
    --danger-hover: #b02a37;

    /* Alert Colors */
    --danger-color-text: #f8d7da;
    --danger-color-bg: #dc354533;
    --danger-color-border: #dc354588;
    --info-color-text: #cff4fc;
    --info-color-bg: #0dcaf033;
    --info-color-border: #0dcaf088;
    --warning-color-text: #664d03; /* Dark text for light background */
    --warning-color-bg: #fff3cd;
    --warning-color-border: #ffecb5;


    /* Shadows */
    --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.3);
    --shadow-md: 0 4px 20px rgba(0, 0, 0, 0.6);

    /* Transitions */
    --transition-fast: 0.2s ease;
    --transition-smooth: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

html {
    height: 100%; /* Needed for sticky footer */
}

body {
    font-family: 'Inter', sans-serif;
    line-height: 1.6;
    background-color: var(--background-dark); /* Set base background */
    color: var(--text-primary); /* Set base text color */
    margin: 0; /* Ensure no default body margin */
    min-height: 100%; /* Needed for sticky footer */
    display: flex; /* Needed for sticky footer */
    flex-direction: column; /* Needed for sticky footer */
}

/* --- General Typography & Element Styles --- */

h1, h2, h3, h4, h5, h6 {
    margin-top: 1.5rem;
    margin-bottom: 1rem;
    font-weight: 600; /* Slightly bolder */
    line-height: 1.3;
    color: var(--text-primary);
}

h1 { font-size: 2.2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.5rem; }
h4 { font-size: 1.2rem; }
/* h5, h6 can inherit base size or be slightly larger if needed */

p {
    margin-bottom: 1rem;
}

/* General link styling (excluding navbar links, which have specific rules) */
a:not(.nav-link):not(.navbar-brand):not(.btn) { /* Updated exclusion */
    color: var(--primary-color);
    text-decoration: none; /* Remove underline by default */
    transition: color var(--transition-fast);
}

a:not(.nav-link):not(.navbar-brand):not(.btn):hover { /* Updated exclusion */
    color: var(--primary-hover);
    text-decoration: underline; /* Add underline on hover for clarity */
}

ul, ol {
    padding-left: 2rem; /* Indent lists */
    margin-bottom: 1rem;
}

li {
    margin-bottom: 0.5rem; /* Space out list items */
}

hr { /* Style horizontal rules */
    border: 0;
    height: 1px;
    background-color: rgba(255, 255, 255, 0.15);
    margin: 2rem 0;
}

/* --- End General Styles --- */

/* --- Utility Classes --- */
.mt-3 { margin-top: 1rem !important; } /* Approximate Bootstrap value */
.mt-4 { margin-top: 1.5rem !important; } /* Approximate Bootstrap value */
.mb-3 { margin-bottom: 1rem !important; }
.mb-4 { margin-bottom: 1.5rem !important; } /* Approximate Bootstrap value */
.ms-2 { margin-left: 0.5rem !important; } /* Approximate Bootstrap value */

.text-muted, .text-body-secondary { /* Combine similar concepts */
    color: var(--text-secondary) !important;
}
.text-center { text-align: center !important; }

.flex-between-center {
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
}
/* --- End Utility Classes --- */


/* Basic Layout Container */
.container {
    width: 100%;
    max-width: 1140px; /* Example max-width, similar to Bootstrap's lg breakpoint */
    padding-right: 15px; /* Standard container padding */
    padding-left: 15px;
    margin-right: auto; /* Center the container */
    margin-left: auto;
    box-sizing: border-box; /* Include padding in width calculation */
}

/* Replicating Bootstrap Navbar Styles */
nav.navbar { /* Target the nav element with the .navbar class */
    background-color: var(--surface-dark); /* Approximate bg-body-tertiary in dark mode */
    padding-top: 0.75rem; /* Slightly more vertical padding */
    padding-bottom: 0.75rem;
    margin-bottom: 1.5rem; /* Replicate mb-4 */
    border-bottom: 1px solid rgba(255, 255, 255, 0.1); /* Subtle separator */
    /* Need flexbox for layout */
    display: flex;
    flex-wrap: wrap; /* Allow items to wrap on smaller screens eventually */
    align-items: center;
    /* justify-content: space-between; Let container handle this */
    flex-shrink: 0; /* Prevent navbar from shrinking */
}

/* Style the container specifically within the navbar */
nav.navbar .container {
    display: flex;
    flex-wrap: inherit;
    align-items: center;
    justify-content: space-between; /* Pushes brand left, nav items right */
    width: 100%; /* Ensure container takes full width within navbar padding */
    /* max-width, padding, margin handled by general .container rule */
}


.navbar-brand {
    padding-top: 0.3125rem;
    padding-bottom: 0.3125rem;
    margin-right: 1rem; /* Space between brand and nav items */
    font-size: 1.25rem;
    color: var(--text-primary); /* Use primary text color */
    text-decoration: none;
    white-space: nowrap; /* Prevent wrapping */
}

/* Styling Navigation Links */
.navbar-nav {
    display: flex;
    flex-direction: row; /* Align items horizontally by default */
    padding-left: 0; /* Remove default list padding */
    margin-bottom: 0; /* Remove default list margin */
    list-style: none; /* Remove bullet points */
    margin-left: auto; /* Push nav items to the right */
}

.nav-item {
    /* Usually doesn't need specific styles unless adding margins between items */
}

.nav-link {
    display: block; /* Make the link fill the list item */
    padding: 0.5rem 1rem; /* Padding around the link text */
    color: var(--text-secondary); /* Use secondary text color for less emphasis */
    text-decoration: none;
    transition: color var(--transition-fast), background-color var(--transition-fast);
    border-radius: 6px; /* Match old nav a style */
}

.nav-link:hover,
.nav-link:focus { /* Add focus state for accessibility */
    color: var(--primary-color); /* Use primary color on hover/focus */
    background-color: rgba(187, 134, 252, 0.1); /* Match old nav a hover */
}

/* Enhanced Main Container */
/* Note: This 'main' element also has the .container class in header.ejs */
main.container { /* Target main specifically if it has .container */
    background-color: var(--surface-dark);
    /* padding: 2rem; /* This overrides .container padding - remove if using container padding */
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.15); /* Slightly more visible border */
    box-shadow: var(--shadow-md);
    transition: transform var(--transition-smooth);
    /* Add margin previously provided by Bootstrap's .mt-4 */
    margin-top: 1.5rem; /* Replicates mt-4 */
    margin-bottom: 1.5rem; /* Add some bottom margin too */
    padding-top: 2rem; /* Add padding back since we removed the direct main padding */
    padding-bottom: 2rem;
    flex-grow: 1; /* Needed for sticky footer */
}

main.container:hover {
    transform: translateY(-2px);
}

/* --- Form Styles --- */
form label { /* Add basic label styling */
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 600;
}

.form-group {
    margin-bottom: 1rem; /* Spacing between form elements */
}

form input[type="text"],
form input[type="password"],
form input[type="file"],
form textarea {
    background-color: rgba(255, 255, 255, 0.05);
    color: var(--text-primary);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    padding: 0.8rem 1rem;
    transition: all var(--transition-fast);
    /* Add basic width */
    width: 100%;
    /* margin-bottom: 1rem; /* Replaced by .form-group */
    box-sizing: border-box; /* Include padding and border in element's total width */
}

form input:focus,
form textarea:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px rgba(187, 134, 252, 0.2);
    background-color: rgba(255, 255, 255, 0.08);
    transition: border-color var(--transition-fast), box-shadow var(--transition-fast), background-color var(--transition-fast); /* Smooth focus transition */
}
/* --- End Form Styles --- */

/* --- Button Styles --- */

/* Base Button Styles */
.btn {
    display: inline-block;
    font-weight: 600;
    line-height: 1.5;
    color: var(--text-primary); /* Default text color */
    text-align: center;
    text-decoration: none;
    vertical-align: middle;
    cursor: pointer;
    user-select: none;
    background-color: transparent; /* Default background */
    border: 1px solid transparent; /* Default border */
    padding: 0.6rem 1.2rem; /* Slightly smaller padding than btn-primary */
    font-size: 1rem;
    border-radius: 8px;
    transition: all var(--transition-fast);
    margin-top: 0.5rem; /* Consistent top margin */
}

.btn:hover {
    filter: brightness(1.1);
    transform: translateY(-2px); /* Consistent hover lift */
    box-shadow: var(--shadow-sm);
}

/* Button Sizes */
.btn-sm {
    padding: 0.25rem 0.5rem;
    font-size: 0.875rem;
    border-radius: 6px; /* Smaller radius for smaller button */
    margin-top: 0; /* Remove default top margin for inline buttons */
}

/* Specific Button Variants */
.btn-primary {
    /* Inherits display, font-weight, line-height, text-align, etc. from .btn */
    background-color: var(--primary-color);
    color: var(--background-darker);
    border: none; /* Override base border if needed */
    /* Keep specific padding, letter-spacing if desired */
    padding: 0.8rem 1.5rem;
    letter-spacing: 0.5px;
}

.btn-primary:hover {
    /* Inherits base hover transform/shadow/filter */
    background-color: var(--primary-hover);
    /* Keep specific hover effects */
    transform: translateY(-3px);
    box-shadow: var(--shadow-md);
}

.btn-secondary {
    color: var(--text-primary);
    background-color: var(--secondary-color-bg); /* Use surface color */
    border-color: var(--secondary-color-border); /* Slightly visible border */
}
.btn-secondary:hover {
    background-color: var(--secondary-hover-bg); /* Lighten slightly on hover */
    border-color: var(--secondary-hover-border);
}

.btn-success {
    color: #fff; /* White text on success */
    background-color: var(--success-color);
    border-color: var(--success-color);
}

.btn-success:hover {
    background-color: var(--success-hover);
    border-color: var(--success-hover);
}

.btn-warning {
    color: var(--background-darker); /* Dark text on warning */
    background-color: var(--warning-color);
    border-color: var(--warning-color);
}

.btn-warning:hover {
    background-color: var(--warning-hover);
    border-color: var(--warning-hover);
}

.btn-info {
    color: #fff;
    background-color: var(--info-color);
    border-color: var(--info-color);
}
.btn-info:hover {
    background-color: var(--info-hover);
    border-color: var(--info-hover);
}

.btn-danger {
    color: #fff;
    background-color: var(--danger-color);
    border-color: var(--danger-color);
}
.btn-danger:hover {
    background-color: var(--danger-hover);
    border-color: var(--danger-hover);
}


/* Full Width Button */
.btn-block {
    display: block;
    width: 100%;
}

/* Centered Button Group */
.button-group-centered {
    margin-top: 1.5rem; /* Replicate mt-3 */
    display: flex;
    justify-content: center;
    gap: 0.5rem; /* Replicate gap-2 */
    flex-wrap: wrap; /* Allow buttons to wrap on small screens */
}

/* --- End Button Styles --- */

/* --- Alert Styles --- */
.alert {
    position: relative;
    padding: 1rem 1rem;
    margin-bottom: 1rem;
    border: 1px solid transparent;
    border-radius: 8px;
}

.alert-danger {
    color: var(--danger-color-text); /* Light red text */
    background-color: var(--danger-color-bg); /* Semi-transparent red background */
    border-color: var(--danger-color-border); /* Semi-transparent red border */
}

.alert-info {
    color: var(--info-color-text); /* Example info colors */
    background-color: var(--info-color-bg);
    border-color: var(--info-color-border);
}

.alert-warning {
    color: var(--warning-color-text); /* Dark text for light background */
    background-color: var(--warning-color-bg);
    border-color: var(--warning-color-border);
}
/* --- End Alert Styles --- */

/* --- List Group Styles --- */
.list-group {
    display: flex;
    flex-direction: column;
    padding-left: 0;
    margin-bottom: 1rem; /* Add some bottom margin */
    border-radius: 8px; /* Match other elements */
    overflow: hidden; /* Clip borders */
}

.list-group-item {
    position: relative;
    display: block;
    padding: 0.75rem 1.25rem;
    color: var(--text-primary);
    text-decoration: none;
    background-color: var(--surface-dark); /* Match main container */
    border: 1px solid rgba(255, 255, 255, 0.1);
}

/* Adjust borders for stacked items */
.list-group-item + .list-group-item {
    border-top-width: 0;
}

/* Flex layout for items */
.list-group-item.d-flex { /* Target items specifically marked for flex */
    display: flex !important; /* Use important to override default block if needed */
    justify-content: space-between !important;
    align-items: center !important;
}
/* --- End List Group Styles --- */


/* Remove container styles as it's no longer used for layering */
/* .typing-area-container { ... } */

/* Style for the visible text display box */
/* Style for the visible text display box */
#current-line-display {
    /* Remove positioning related to layering */
    /* position: relative; */
    /* z-index: 1; */
    font-family: 'JetBrains Mono', monospace;
    font-size: 1.6rem;
    background-color: #000; /* Keep black background */
    color: var(--text-primary);
    border: 1px solid rgba(129, 199, 132, 0.5);
    border-radius: 10px;
    padding: 1.5rem 2rem;
    margin-bottom: 1rem; /* Add margin below the display, above the input */
    box-shadow: var(--shadow-sm);
    white-space: pre-wrap;
    line-height: 1.8;
    min-height: 100px;
}

/* Style for the VISIBLE input area below the display */
#typing-input {
    /* Remove absolute positioning and transparency */
    /* position: absolute; ... */
    width: 100%;
    font-family: 'JetBrains Mono', monospace; /* Keep font consistent */
    font-size: 1.4rem; /* Slightly smaller than display is fine */
    line-height: 1.6;
    padding: 1rem 1.5rem; /* Standard padding */
    background-color: rgba(255, 255, 255, 0.05); /* Use standard input background */
    border: 1px solid rgba(255, 255, 255, 0.1); /* Standard input border */
    color: var(--text-primary); /* Standard text color */
    caret-color: var(--primary-color); /* Keep caret color */
    resize: vertical; /* Allow vertical resize */
    border-radius: 8px; /* Standard border radius */
    box-sizing: border-box;
    margin-top: 0; /* Display has margin-bottom now */
    /* Remove height: 100% */
    /* Remove z-index */
    /* Remove overflow: hidden */
}

/* Standard focus style for visible input */
#typing-input:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px rgba(187, 134, 252, 0.2);
    background-color: rgba(255, 255, 255, 0.08);
}

/* Practice Page Specific Styles */
/* Style for the results/stats area */
#results {
    display: flex; /* Arrange stats horizontally */
    justify-content: center; /* Center the stats */
    gap: 2rem; /* Space between stats */
    margin-top: 1.5rem;
    margin-bottom: 1.5rem;
    padding: 0.5rem 0; /* Minimal vertical padding */
    background-color: transparent; /* Remove background */
    border: none; /* Remove border */
    border-radius: 0;
}

/* Style individual stat paragraphs */
#results p {
    margin-bottom: 0; /* Remove bottom margin */
    font-size: 1rem; /* Slightly larger font */
    color: var(--text-secondary); /* Muted color */
    text-align: center;
}

#results p span {
    font-weight: 600;
    color: var(--text-primary);
}

/* Modern Character Highlighting */
.correct {
    color: var(--success-color);
    text-shadow: 0 0 8px rgba(129, 199, 132, 0.3);
}

.incorrect {
    color: var(--error-color);
    text-shadow: 0 0 8px rgba(229, 115, 115, 0.3);
}

/* Enhanced Animations */
@keyframes pulse-success {
    0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(129, 199, 132, 0.4); }
    50% { transform: scale(1.02); box-shadow: 0 0 0 10px rgba(129, 199, 132, 0); }
    100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(129, 199, 132, 0); }
}

.completed {
    animation: pulse-success 2s infinite;
    background-color: rgba(129, 199, 132, 0.1);
    border: 2px solid var(--success-color);
    padding: 1rem;
    border-radius: 12px;
}

/* Character Typing Animations */
@keyframes char-correct-pop {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); color: var(--success-color); } /* Pop effect */
    100% { transform: scale(1); }
}

@keyframes char-incorrect-shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-3px); color: var(--error-color); } /* Shake effect */
    75% { transform: translateX(3px); color: var(--error-color); }
}

/* Apply animations to the temporary effect classes */
#current-line-display span {
    display: inline-block; /* Needed for transform */
    transition: color 0.1s ease-out; /* Smooth color transition back */
    /* Add a small margin to visually separate inline-block spans */
    margin-right: 1px;
}

/* Ensure spaces occupy some width when inline-block */
#current-line-display span.space-char {
    /* Ensure it still takes up space */
    min-width: 0.25em; /* Adjust as needed based on font size */
    /* Remove any styles that make it look like an underscore */
    border-bottom: none;
    padding: 0;
    margin-bottom: 0;
}


.effect-correct {
    animation: char-correct-pop 0.3s ease-out;
}

.effect-incorrect {
    animation: char-incorrect-shake 0.3s ease-in-out;
}

/* Responsive Navbar Styles (Replicating navbar-expand-lg) */
@media (max-width: 991.98px) { /* Bootstrap lg breakpoint - 1px */
    nav.navbar .container {
        /* Allow brand and nav to stack */
        flex-direction: column;
        align-items: flex-start; /* Align items to the start when stacked */
    }

    .navbar-nav {
        flex-direction: column; /* Stack nav items vertically */
        width: 100%; /* Take full width */
        margin-left: 0; /* Reset margin used for right alignment */
        margin-top: 0.5rem; /* Add space below brand */
    }

    .nav-item {
        /* Optional: Add spacing between stacked items */
        margin-bottom: 0.25rem;
    }

    .nav-link {
        padding: 0.5rem 0; /* Adjust padding for vertical layout */
        /* Optional: Add border or background for separation */
        width: 100%; /* Ensure link takes full width */
        border-radius: 0; /* Optional: Remove radius in stacked view */
    }

    /* Note: This doesn't include the toggle button functionality,
       which requires JavaScript. Links will always be visible. */
}

/* Footer Styles */
footer {
    background-color: var(--surface-dark); /* Replicate bg-body-tertiary */
    padding-top: 1rem; /* Replicate py-3 */
    padding-bottom: 1rem;
    margin-top: auto; /* Attempt to replicate mt-auto for sticky footer */
    text-align: center; /* Replicate text-center */
    color: var(--text-secondary); /* Replicate text-body-secondary */
    flex-shrink: 0; /* Prevent footer from shrinking */
    border-top: 1px solid rgba(255, 255, 255, 0.1); /* Subtle separator */
}

/* Footer container specific styles (if needed, but text-align on footer might suffice) */
footer .container {
   /* Styles specific to the container within the footer, if any */
   /* Centering is handled by margin: auto on .container */
   /* Text alignment handled by text-align on footer */
}
